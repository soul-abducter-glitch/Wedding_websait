generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum UserRole {
  SUPER_ADMIN
  CONTENT_EDITOR
}

enum LeadStatus {
  NEW
  VIEWED
  ANSWERED
}

model User {
  id           String   @id @default(uuid())
  email        String   @unique
  passwordHash String
  role         UserRole @default(CONTENT_EDITOR)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

model WeddingStory {
  id               String         @id @default(uuid())
  slug             String         @unique
  title            String
  location         String
  date             DateTime?
  shortDescription String
  fullDescription  String
  coverImageUrl    String
  isFeatured       Boolean        @default(false)
  createdAt        DateTime       @default(now())
  updatedAt        DateTime       @updatedAt
  images           WeddingImage[]
  reviews          Review[]
}

model WeddingImage {
  id             String       @id @default(uuid())
  weddingStory   WeddingStory @relation(fields: [weddingStoryId], references: [id])
  weddingStoryId String
  imageUrl       String
  alt            String?
  sortOrder      Int          @default(0)
  createdAt      DateTime     @default(now())
}

model Review {
  id             String         @id @default(uuid())
  names          String
  location       String
  text           String
  weddingStory   WeddingStory?  @relation(fields: [weddingStoryId], references: [id])
  weddingStoryId String?
  isVisible      Boolean        @default(true)
  createdAt      DateTime       @default(now())
}

model HomepageContent {
  id             String   @id @default(uuid())
  heroTagline    String?
  heroTitle      String?
  heroSubtitle   String?
  heroStatsLine  String?
  aboutImageUrl  String?
  aboutImageAlt  String?
  aboutTitle     String?
  aboutTextShort String?
  ctaTitle       String?
  ctaSubtitle    String?
  ctaButtonText  String?
  updatedAt      DateTime @updatedAt
}

model BlogPost {
  id             String   @id @default(uuid())
  slug           String   @unique
  title          String
  coverImageUrl  String?
  excerpt        String?
  content        String?
  publishedAt    DateTime?
  isPublished    Boolean  @default(false)
  seoTitle       String?
  seoDescription String?
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}

model Lead {
  id          String     @id @default(uuid())
  name        String
  email       String
  phone       String?
  weddingDate DateTime?
  location    String
  message     String
  source      String?
  status      LeadStatus @default(NEW)
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
}
